<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <link rel="stylesheet" href="resources/bootstrap.min.css">
        <link rel="stylesheet" href="resources/style.css">
        <link rel="stylesheet" href="resources/jquery.iviewer.css">

        <title>
            Class: ShardManager - Library SmartFactory
        </title>
    </head>

    <body>
        <div id="navigation">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <nav class="navbar">
                    <ul class="nav navbar-nav">
                        
                        
                        <li>
                            <a href="index.html" class="">
                                Overview
                            </a>
                        </li>
                        
                        <li>
                            <a href="classes.html" class="active">
                                Classes
                            </a>
                        </li>
                        
                        <li>
                            <a href="interfaces.html" class="">
                                Interfaces
                            </a>
                        </li>
                        
                        <li>
                            <a href="functions.html" class="">
                                Functions
                            </a>
                        </li>
                        
                        <li>
                            <a href="diagram.html" class="">
                                Diagram
                            </a>
                        </li>
                        
                        <li>
                            <a href="structure.html" class="">
                                Structure
                            </a>
                        </li>
                        

                    </ul>

                    <form id="search" class="pull-right">
                        <input type="text" name="q" class="form-control text" placeholder="Search class, function or namespace">
                    </form>
                </nav>
            </div>
        </div>
    </div>
</div>

        
        <div id="breadcrumbs">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
            
                
                <div class="pull-left type">
                    <span class="label label-success">Class</span>
                </div>
                
                
                <ol class="breadcrumb pull-left">
                        
                        

                        <li>
                            <a href="namespace-SmartFactory.html">SmartFactory</a>
                        </li>

                        <!-- if separator -->
                        <li class="backslash">\</li>
                        <!-- endif separator -->

                        

                        <li>
                            <a href="namespace-SmartFactory.DatabaseWorkers.html">DatabaseWorkers</a>
                        </li>

                        <!-- if separator -->
                        <li class="backslash">\</li>
                        <!-- endif separator -->

                        
 

                        <li class="active">ShardManager</li>
                </ol>
                
            </div>
        </div>
    </div>
</div>

        
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h1>Class: ShardManager</h1>




<div class="short-description">
Class for managing connections to the DB shards.
</div>



<div class="long-description">
<h2>Details</h2>
<p>This shard manager allows registering multiple shards and request connections to them.
It ensures that only one connection to a shard is used within a request.</p>
</div>





<h2>Implements</h2>
<div class="item_list">

<a href="interface-SmartFactory.Interfaces.IShardManager.html">\SmartFactory\Interfaces\IShardManager</a><br>

</div>





<h2>Author</h2>
Oleg Schildt



<h2>Package</h2>
<a href="package-Default.html">Default</a>


<h2>Source code</h2>
<a href="source-SmartFactory.DatabaseWorkers.ShardManager.html#22">SmartFactory\DatabaseWorkers\ShardManager.php</a>


<h2>See also</h2>
<div class="item_list">

<a href="class-SmartFactory.DatabaseWorkers.DBWorker.html">\SmartFactory\DatabaseWorkers\DBWorker</a><br>

</div>






<p>&nbsp;</p>




  <table class="table table-responsive table-bordered table-striped class_multicolumn">
      <tr><th colspan="3">Properties</th></tr>
      
      
      <tr>
          <td>
              <a href="#$load_balancing_groups">$load_balancing_groups</a>
          </td>
          <td>
              <span class='protected'>protected</span>
          </td>
          <td class="description_column">
              Internal array for storing the load balancing groups and its shards.
          </td>
      </tr>
      
      <tr>
          <td>
              <a href="#$shard_table">$shard_table</a>
          </td>
          <td>
              <span class='protected'>protected</span>
          </td>
          <td class="description_column">
              Internal array for storing the mapping betwen shard names and connection parameters.
          </td>
      </tr>
      
      
  </table>



  <table class="table table-responsive table-bordered table-striped class_multicolumn">
      <tr><th colspan="3">Methods</th></tr>
      
      
      <tr>
          <td>
              <a href="#dbshard">dbshard</a>
          </td>
          <td>
              <span class='public'>public</span>
          </td>
          <td class="description_column">
              The method provides the DBWorker object for working with the shard.
          </td>
      </tr>
      
      <tr>
          <td>
              <a href="#randomDBShard">randomDBShard</a>
          </td>
          <td>
              <span class='public'>public</span>
          </td>
          <td class="description_column">
              The method provides the DBWorker object for working with the shard, that is chosen randomly
for load balancing reason.
          </td>
      </tr>
      
      <tr>
          <td>
              <a href="#registerShard">registerShard</a>
          </td>
          <td>
              <span class='public'>public</span>
          </td>
          <td class="description_column">
              Registers a new shard.
          </td>
      </tr>
      
      
  </table>





  
  <hr id="$load_balancing_groups">
  
  <h1>Property: $load_balancing_groups</h1>

  <div class="definition"><span class="php-keyword1">protected</span> <b>$load_balancing_groups</b> = <span class="php-keyword1">array</span>()</div>

  <span class="type_label">Type:</span> array
  
  
  <div class="short-description">
  Internal array for storing the load balancing groups and its shards.
  </div>
  

  

  
  
  
  
  
  <h2>Author</h2>
  Oleg Schildt
  

  <h2>Source code</h2>
  <a href="source-SmartFactory.DatabaseWorkers.ShardManager.html#31">SmartFactory\DatabaseWorkers\ShardManager.php</a>

  

  

  
  
  <hr id="$shard_table">
  
  <h1>Property: $shard_table</h1>

  <div class="definition"><span class="php-keyword1">protected</span> <b>$shard_table</b> = <span class="php-keyword1">array</span>()</div>

  <span class="type_label">Type:</span> array
  
  
  <div class="short-description">
  Internal array for storing the mapping betwen shard names and connection parameters.
  </div>
  

  

  
  
  
  
  
  <h2>Author</h2>
  Oleg Schildt
  

  <h2>Source code</h2>
  <a href="source-SmartFactory.DatabaseWorkers.ShardManager.html#40">SmartFactory\DatabaseWorkers\ShardManager.php</a>

  

  

  
  



  
  <hr id="dbshard">
  
  <h1>Method: dbshard</h1>

  <div class="definition"><span class="php-keyword1">public</span> <b>dbshard</b>(string <span class="php-var">$shard_name</span>) : \SmartFactory\DatabaseWorkers\DBWorker|<span class="php-keyword1">null</span></div>

  
  <div class="short-description">
  The method provides the DBWorker object for working with the shard.
  </div>
  

  
  <div class="long-description">
  <h2>Details</h2>
  <p>If the parameters are omitted, the system takes the parameters from the configuration
settings and reuses the single instance of the DBWorker for all requests.
If the user passes the parameters explicitly, a new instance of the DBWorker is created upon each new request.</p>
<p>Currently supported: MySQL und MS SQL.</p>
  </div>
  

  
  <h2>Parameters</h2>
  
      <h3>$shard_name</h3>
      <span class="type_label">Type:</span> string
      
      <div class="param-description">
      <p>The name of the shard.</p>
      </div>
      
  
  

  
  <h2>Returns</h2>
  <span class="type_label">Type:</span> <a href="class-SmartFactory.DatabaseWorkers.DBWorker.html">\SmartFactory\DatabaseWorkers\DBWorker</a>|null
  
  <div class="param-description">
  <p>returns DBWorker object or null if the object could not be created.</p>
  </div>
  
  

  
  <h2>Throws</h2>
  <div class="item_list">
  
      <b>\Exception</b><br>
      
      
      <p>It might throw an exception in the case of any errors:</p>
<ul>
<li>if the interface or class does not exist.</li>
<li>if the shard was not found.</li>
<li>if the check of the classes and interfaces fails.</li>
<li>if the php extension is not installed.</li>
<li>db_missing_type_error - if the database type is not specified.</li>
<li>db_conn_data_error - if the connection parameters are incomplete.</li>
<li>db_server_conn_error - if the database server cannot be connected.</li>
<li>db_not_exists_error - if database does not exists od inaccesible to the user.</li>
</ul><br>
      
  
  </div>
  

  
  
  
  
  
  <h2>Implements</h2>
  <a href="interface-SmartFactory.Interfaces.IShardManager.html#dbshard">\SmartFactory\Interfaces\IShardManager::dbshard()</a><br>
  
  
  
  <h2>Author</h2>
  Oleg Schildt
  

  <h2>Source code</h2>
  <a href="source-SmartFactory.DatabaseWorkers.ShardManager.html#128">SmartFactory\DatabaseWorkers\ShardManager.php</a>

  

  

  
  
  
  <hr id="randomDBShard">
  
  <h1>Method: randomDBShard</h1>

  <div class="definition"><span class="php-keyword1">public</span> <b>randomDBShard</b>(string <span class="php-var">$load_balancing_group</span>) : \SmartFactory\DatabaseWorkers\DBWorker|<span class="php-keyword1">null</span></div>

  
  <div class="short-description">
  The method provides the DBWorker object for working with the shard, that is chosen randomly
for load balancing reason.
  </div>
  

  

  
  <h2>Parameters</h2>
  
      <h3>$load_balancing_group</h3>
      <span class="type_label">Type:</span> string
      
      <div class="param-description">
      <p>The name of the load balancing group, from which the shard should be randomly picked.</p>
      </div>
      
  
  

  
  <h2>Returns</h2>
  <span class="type_label">Type:</span> <a href="class-SmartFactory.DatabaseWorkers.DBWorker.html">\SmartFactory\DatabaseWorkers\DBWorker</a>|null
  
  <div class="param-description">
  <p>returns DBWorker object or null if the object could not be created.</p>
  </div>
  
  

  
  <h2>Throws</h2>
  <div class="item_list">
  
      <b>\Exception</b><br>
      
      
      <p>It might throw an exception in the case of any errors:</p>
<ul>
<li>if the load balancing group was not found.</li>
<li>db_server_conn_error - if the database server cannot be connected.</li>
<li>db_not_exists_error - if database does not exists od inaccesible to the user.</li>
</ul><br>
      
  
  </div>
  

  
  
  
  
  
  <h2>Implements</h2>
  <a href="interface-SmartFactory.Interfaces.IShardManager.html#randomDBShard">\SmartFactory\Interfaces\IShardManager::randomDBShard()</a><br>
  
  
  
  <h2>Author</h2>
  Oleg Schildt
  

  <h2>Source code</h2>
  <a href="source-SmartFactory.DatabaseWorkers.ShardManager.html#174">SmartFactory\DatabaseWorkers\ShardManager.php</a>

  

  

  
  
  
  <hr id="registerShard">
  
  <h1>Method: registerShard</h1>

  <div class="definition"><span class="php-keyword1">public</span> <b>registerShard</b>(string <span class="php-var">$shard_name</span>,
                     <span class="php-keyword1">array</span> <span class="php-var">$parameters</span>,
                     string <span class="php-var">$load_balancing_group</span> = <span class="php-quote">&quot;&quot;</span>
                    ) : boolean</div>

  
  <div class="short-description">
  Registers a new shard.
  </div>
  

  

  
  <h2>Parameters</h2>
  
      <h3>$shard_name</h3>
      <span class="type_label">Type:</span> string
      
      <div class="param-description">
      <p>Unique shard name.</p>
      </div>
      
  
      <h3>$parameters</h3>
      <span class="type_label">Type:</span> array
      
      <div class="param-description">
      <p>The connection parameters to the shard as an associative array in the form key => value:</p>
<ul>
<li>
<p>$parameters["db_type"] - type of the database (MySQL or MSSQL)</p>
</li>
<li>
<p>$parameters["db_server"] - server address</p>
</li>
<li>
<p>$parameters["db_name"] - database name</p>
</li>
<li>
<p>$parameters["db_user"] - user name</p>
</li>
<li>
<p>$parameters["db_password"] - user password</p>
</li>
<li>
<p>$parameters["autoconnect"] - should true if the connection should be established automatically
upon creation.</p>
</li>
<li>
<p>$parameters["read_only"] - this paramter sets the connection to the read only mode.</p>
</li>
</ul>
      </div>
      
  
      <h3>$load_balancing_group</h3>
      <span class="type_label">Type:</span> string
      
      <div class="param-description">
      <p>The name of the load balancing group, if the shard should be part of it, ShardManager::randomDBShard().</p>
      </div>
      
  
  

  
  <h2>Returns</h2>
  <span class="type_label">Type:</span> boolean
  
  <div class="param-description">
  <p>It should return true if the registering was successful, otherwise false.</p>
  </div>
  
  

  
  <h2>Throws</h2>
  <div class="item_list">
  
      <b>\Exception</b><br>
      
      
      <p>It might throw an exception in the case of any errors:</p>
<ul>
<li>if the shard name is not specified.</li>
<li>if the shard name has been already registered.</li>
</ul><br>
      
  
  </div>
  

  
  
  
  
  
  <h2>Implements</h2>
  <a href="interface-SmartFactory.Interfaces.IShardManager.html#registerShard">\SmartFactory\Interfaces\IShardManager::registerShard()</a><br>
  
  
  
  <h2>Author</h2>
  Oleg Schildt
  

  <h2>Source code</h2>
  <a href="source-SmartFactory.DatabaseWorkers.ShardManager.html#80">SmartFactory\DatabaseWorkers\ShardManager.php</a>

  

  

  
  
  



                    
                    <div id="footer">
                        Generated on 2020-09-11 11:28
                    </div>                    
                </div>
            </div>
        </div>

        <script src="resources/jquery-3.2.1.min.js"></script>
        <script src="resources/jquery-ui-1.12.1.min.js"></script>

        <script src="elementlist.js"></script>
        <script src="resources/main.js"></script>
        
        <script src="resources/jquery.iviewer.js" type="text/javascript"></script>
        <script src="resources/jquery.mousewheel.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            $(window).resize(function(){
                $("#viewer").height(1400);
            });

            $(document).ready(function() {
                $("#viewer").iviewer({src: 'resources/classes.svg', zoom_animation: false});
                $('#viewer img').bind('dragstart', function(event){
                    event.preventDefault();
                });
                $(window).resize();
            });
        </script>
        
    </body>
</html>


